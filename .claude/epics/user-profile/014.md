---
name: Create Profile Routes and Navigation
status: open
created: 2026-01-18T08:24:04Z
parallel: false
effort: 2 hours
depends_on: [009, 010, 011, 012, 013]
conflicts_with: []
---

# Task: 014 - Create Profile Routes and Navigation

## Specification
Create all necessary routes for the profile feature and integrate with the main navigation system. This enables users to access all profile pages.

## Acceptance Criteria
- [ ] `/profile` route for profile display
- [ ] `/profile/edit` route for profile editing
- [ ] `/profile/avatar` route for avatar settings
- [ ] `/profile/privacy` route for privacy settings
- [ ] `/profile/account` route for account management
- [ ] Routes configured with lazy loading
- [ ] Navigation links added to main nav
- [ ] Mobile navigation links added
- [ ] User dropdown links added
- [ ] Protected routes (auth required)

## Files
- `src/domains/user/profile/index.ts` (new)
- `src/domains/user/profile/routes.tsx` (new)
- `src/components/navigation/ProfileNav.tsx` (new)

## Technical Approach

### Step 1: Create Domain Index
```typescript
// src/domains/user/profile/index.ts
export * from './1-display'
export * from './2-edit'
export * from './3-avatar'
export * from './4-privacy'
export * from './5-account'
```

### Step 2: Create Routes Configuration
```typescript
// src/domains/user/profile/routes.tsx
import { lazy } from 'react'
import { ProtectedRoute } from '@/components/auth/ProtectedRoute'

// Lazy load all profile pages
const ProfileDisplayPage = lazy(() =>
  import('./1-display/ui/pages/ProfileDisplayPage').then(m => ({
    default: m.ProfileDisplayPage
  }))
)

const ProfileEditPage = lazy(() =>
  import('./2-edit/ui/pages/ProfileEditPage').then(m => ({
    default: m.ProfileEditPage
  }))
)

const AvatarSettingsPage = lazy(() =>
  import('./3-avatar/ui/pages/AvatarSettingsPage').then(m => ({
    default: m.AvatarSettingsPage
  }))
)

const PrivacySettingsPage = lazy(() =>
  import('./4-privacy/ui/pages/PrivacySettingsPage').then(m => ({
    default: m.PrivacySettingsPage
  }))
)

const AccountSettingsPage = lazy(() =>
  import('./5-account/ui/pages/AccountSettingsPage').then(m => ({
    default: m.AccountSettingsPage
  }))
)

export const profileRoutes = [
  {
    path: '/profile',
    element: (
      <ProtectedRoute>
        <ProfileDisplayPage />
      </ProtectedRoute>
    ),
    label: 'Profile'
  },
  {
    path: '/profile/edit',
    element: (
      <ProtectedRoute>
        <ProfileEditPage />
      </ProtectedRoute>
    ),
    label: 'Edit Profile'
  },
  {
    path: '/profile/avatar',
    element: (
      <ProtectedRoute>
        <AvatarSettingsPage />
      </ProtectedRoute>
    ),
    label: 'Avatar Settings'
  },
  {
    path: '/profile/privacy',
    element: (
      <ProtectedRoute>
        <PrivacySettingsPage />
      </ProtectedRoute>
    ),
    label: 'Privacy Settings'
  },
  {
    path: '/profile/account',
    element: (
      <ProtectedRoute>
        <AccountSettingsPage />
      </ProtectedRoute>
    ),
    label: 'Account Settings'
  }
]
```

### Step 3: Integrate with Main Router
```typescript
// src/App.tsx or src/router/index.tsx
import { profileRoutes } from '@/domains/user/profile/routes'

// Add to existing routes
export const routes = [
  // ... existing routes
  ...profileRoutes
]
```

### Step 4: Create Profile Navigation Component
```typescript
// src/components/navigation/ProfileNav.tsx
import { Link, useLocation } from 'react-router-dom'
import { cn } from '@/lib/utils'
import {
  User,
  Edit,
  Image,
  Shield,
  Settings,
  ChevronRight
} from 'lucide-react'

interface NavItem {
  path: string
  label: string
  icon: React.ComponentType<{ className?: string }>
}

const navItems: NavItem[] = [
  { path: '/profile', label: 'Profile', icon: User },
  { path: '/profile/edit', label: 'Edit Profile', icon: Edit },
  { path: '/profile/avatar', label: 'Avatar', icon: Image },
  { path: '/profile/privacy', label: 'Privacy', icon: Shield },
  { path: '/profile/account', label: 'Account', icon: Settings }
]

export function ProfileNav() {
  const location = useLocation()

  return (
    <nav className="space-y-1">
      {navItems.map((item) => {
        const Icon = item.icon
        const isActive = location.pathname.startsWith(item.path)

        return (
          <Link
            key={item.path}
            to={item.path}
            className={cn(
              'flex items-center gap-3 px-4 py-3 rounded-lg transition-colors',
              isActive
                ? 'bg-primary text-primary-foreground'
                : 'hover:bg-muted'
            )}
          >
            <Icon className="w-5 h-5" />
            <span className="flex-1">{item.label}</span>
            <ChevronRight className="w-4 h-4 opacity-50" />
          </Link>
        )
      })}
    </nav>
  )
}
```

### Step 5: Add to Main Navigation
```typescript
// src/components/navigation/MainNav.tsx or similar
import { ProfileNav } from './ProfileNav'

export function MainNav() {
  return (
    <nav>
      {/* Existing nav items */}
      <Link to="/profile">Profile</Link>
    </nav>
  )
}
```

### Step 6: Add to User Dropdown
```typescript
// src/components/navigation/UserMenu.tsx or similar
import { User, Settings } from 'lucide-react'
import { Link } from 'react-router-dom'

export function UserMenu() {
  return (
    <DropdownMenu>
      <DropdownMenuTrigger>
        <Avatar />
      </DropdownMenuTrigger>
      <DropdownMenuContent>
        <DropdownMenuItem asChild>
          <Link to="/profile" className="flex items-center gap-2">
            <User className="w-4 h-4" />
            Profile
          </Link>
        </DropdownMenuItem>
        <DropdownMenuItem asChild>
          <Link to="/profile/account" className="flex items-center gap-2">
            <Settings className="w-4 h-4" />
            Account Settings
          </Link>
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

## Dependencies
- Task 009 (ProfileDisplay page must exist)
- Task 010 (ProfileEdit page must exist)
- Task 011 (AvatarSettings page must exist)
- Task 012 (PrivacySettings page must exist)
- Task 013 (AccountSettings page must exist)

## Conflicts
None

## Testing
```bash
# Test all routes
npm run test -- routes

# Test navigation
npm run test -- navigation

# Test protected routes
npm run test -- protected-routes
```

## Verification
- [ ] All routes configured
- [ ] Lazy loading works
- [ ] Navigation links work
- [ ] Mobile navigation works
- [ ] User dropdown links work
- [ ] Protected routes redirect unauthenticated users
- [ ] Active route highlighted
- [ ] Back navigation works

## Route Structure
```
/profile                    → View profile
/profile/edit              → Edit profile
/profile/avatar            → Avatar settings
/profile/privacy           → Privacy settings
/profile/account           → Account management
```

## Performance
- Lazy loading reduces initial bundle size
- Code splitting by route
- Preload on hover for better UX
- Suspense boundaries for loading states

## Security
- All routes protected
- Auth check before load
- Redirect to login if not authenticated
- Check user owns profile being accessed

## Notes
- Use lazy loading for better performance
- Add loading skeletons
- Handle navigation errors
- Test on mobile devices
- Consider adding breadcrumbs
