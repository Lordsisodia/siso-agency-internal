# .purpose.md

## Directory: 9-brain/

**Purpose:** Machine-native, queryable intelligence system for AI to understand, navigate, and reason about Blackbox4.

**Contains:**
- **metadata/** - Metadata schema specifications and examples
  - `schema.yaml` - Complete metadata.yaml schema definition
  - `examples/` - Example metadata files for each artifact type
- **ingest/** - Metadata ingestion tools
  - `validator.py` - Validate metadata.yaml files against schema
  - `template.py` - Generate metadata.yaml templates
- **query/** - Query interface (Phase 3 - planned)
- **databases/** - Database configurations (Phase 2 - planned)
  - `postgresql/` - PostgreSQL setup with pgvector
  - `neo4j/` - Neo4j graph database setup
  - `init.sql` - Database schema initialization
- **api/** - Query API for AI integration (Phase 3 - planned)
- **tests/** - Brain system tests

**Used By:**
- AI agents (for intelligent routing and discovery)
- Ralph Runtime (for autonomous navigation)
- Developers (for finding and understanding artifacts)
- CI/CD (for validation and indexing)

**Owner:** Core Team
**Stability:** High (Phase 1), Medium (Phases 2-4)

**Purpose Statement:**

The Brain v2.0 solves the fundamental problem of "where is everything and where should stuff go" in Blackbox4. Unlike v1 (documentation-based), v2 is machine-native with:

1. **Structured Metadata** - Every artifact has metadata.yaml with standardized fields
2. **Queryable Databases** - PostgreSQL (structured), Neo4j (graph), pgvector (semantic)
3. **Natural Language Interface** - AI can ask questions in plain language
4. **Auto-Indexing** - Automatically stays up-to-date as files change

**Current Phase (Phase 1):**
- ✅ Complete metadata schema specification
- ✅ Metadata validation script
- ✅ Metadata template generator
- ✅ Example metadata files

**Planned Phases:**
- Phase 2: Database setup (PostgreSQL, Neo4j, pgvector)
- Phase 3: Query API with natural language interface
- Phase 4: Automatic file watching and indexing

**Key Files:**
- `README.md` - Complete guide to the brain system
- `metadata/schema.yaml` - Metadata schema specification
- `ingest/validator.py` - Validate metadata.yaml files
- `ingest/template.py` - Generate metadata templates
- `metadata/examples/` - Example metadata for all artifact types

**How It Works:**

1. **Every artifact has metadata.yaml** with standardized fields
2. **Validator ensures quality** - checks required fields, types, valid values
3. **Template generator helps** - creates correct metadata for new artifacts
4. **(Phase 2) Ingestion extracts** - parses metadata and populates databases
5. **(Phase 3) Query API answers** - natural language → database queries
6. **(Phase 4) File watcher updates** - automatic re-indexing on changes

**Relationship to Other Systems:**
- Extends: `.docs/BRAIN-ARCHITECTURE.md` (v1 documentation)
- Replaces: Manual search and lookup
- Complements: `1-agents/.skills/1-core/intelligent-routing.md`
- Uses: `4-scripts/lib/` for ingestion/query tools
- Documents: `.docs/BRAIN-ARCHITECTURE-v2.md` (design spec)

**Success Metrics:**
- AI can place items correctly: >95% accuracy
- AI can find anything: <1 second query time
- AI can reason about relationships: Graph queries work
- Auto-indexing: Updates in <5 seconds after file change
- Semantic search: Relevant results in top 5

**Design Principles:**
1. **Machine-native first** - Designed for AI, not humans
2. **Queryable** - SQL, Cypher, vector search, not grep
3. **Explicit relationships** - Dependencies in graph, not implied
4. **Semantic understanding** - Embeddings capture meaning
5. **Automatic updates** - File watcher, not manual edits
6. **Scalable** - Handles 10,000+ artifacts

**Related:**
- Design: `BRAIN-ARCHITECTURE-v2.md` (complete design spec)
- Discovery: `.docs/DISCOVERY-INDEX.md` (v1 discovery)
- Routing: `1-agents/.skills/1-core/intelligent-routing.md`
- Documentation: `.docs/2-architecture/` (system architecture)
