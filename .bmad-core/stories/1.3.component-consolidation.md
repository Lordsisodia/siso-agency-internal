# Story 1.3: Component Consolidation - TaskCard Unification

*Powered by BMADâ„¢ Core v2.0 | Story Document*

## Status
**Draft** - Ready for implementation approval

## Story
**As a** user,
**I want** consistent task card interactions,
**so that** my experience remains identical while developers maintain fewer implementations.

## Acceptance Criteria
1. 7 TaskCard variants consolidated to 1 composable component with variants
2. All existing task interactions preserved (completion, editing, deletion)
3. Visual consistency maintained across all usage contexts
4. Performance characteristics maintained or improved
5. Component API remains backward compatible for existing usage
6. All task card contexts (LifeLock, Admin, Deep Work, Light Work) render identically

## Tasks / Subtasks

- [ ] **Task 1: Document Current TaskCard Implementations** (AC: 1, 6)
  - [ ] Identify all 7 TaskCard variant locations and their differences
  - [ ] Document visual styling patterns across different contexts
  - [ ] Map component props and behavior variations
  - [ ] Create visual regression test baseline with screenshots

- [ ] **Task 2: Design Unified TaskCard Component** (AC: 1, 2, 5)
  - [ ] Create single TaskCard component using Radix UI composition patterns
  - [ ] Implement variant system (lifelock, admin, deep, light) using Tailwind variants
  - [ ] Design composable props API supporting all existing use cases
  - [ ] Ensure TypeScript interfaces cover all current usage patterns

- [ ] **Task 3: Implement TaskCard with Variant System** (AC: 1, 3, 4)
  - [ ] Create unified TaskCard component with variant props
  - [ ] Implement all visual styling using class-variance-authority patterns
  - [ ] Preserve all existing interaction patterns (clicks, hovers, animations)
  - [ ] Maintain Framer Motion animations if currently used

- [ ] **Task 4: Replace TaskCard Usage Across Application** (AC: 2, 5, 6)
  - [ ] Create Git checkpoint before component replacement
  - [ ] Replace TaskCard components in LifeLock sections
  - [ ] Replace TaskCard components in Admin sections  
  - [ ] Replace TaskCard components in Deep/Light Work sections
  - [ ] Update all import statements and component usage
  - [ ] Verify pixel-perfect visual consistency across all contexts

## Dev Notes

### Relevant Source Tree Information
Based on architectural analysis, TaskCard variants are located in:
```
src/components/tasks/TaskCard.tsx          # Main TaskCard implementation
src/components/tasks/SubtaskItem.tsx       # Subtask variant
src/components/ui/SubtaskRow.tsx          # Another subtask variant
src/ecosystem/internal/admin/components/TodoList.tsx  # Admin-specific variant
src/ecosystem/internal/tasks/components/TodoList.tsx  # Task-specific variant
src/ecosystem/internal/lifelock/sections/  # LifeLock-specific variants
src/ecosystem/internal/admin/dashboard/components/TodoList.tsx  # Dashboard variant
```

**Current Issues Identified:**
- 7 separate TaskCard implementations with similar but slightly different functionality
- Inconsistent styling patterns across different usage contexts
- Duplicate code for task interactions (completion, editing, deletion)
- Maintenance burden from keeping multiple implementations in sync

**Integration Points to Preserve:**
- All existing component props and usage patterns must work
- Task completion handlers must function identically  
- Visual appearance must remain pixel-perfect identical
- Animation and interaction patterns must be preserved
- Parent components should not require any modifications

**Component Design Strategy:**
- Use class-variance-authority for variant management
- Maintain Radix UI component patterns for accessibility
- Preserve all Tailwind CSS styling with variant system
- Use compound component pattern for flexibility

### Testing Standards
**Test File Location:** `src/components/tasks/__tests__/TaskCard.test.tsx`
**Test Standards:** Vitest + React Testing Library for component testing
**Testing Frameworks:**
- Vitest for unit testing component variants
- React Testing Library for user interaction testing
- Visual regression testing for styling consistency
- Accessibility testing with testing-library/jest-dom

**Specific Testing Requirements:**
- Test all variant props render correct styling
- Verify all interaction handlers work identically to current implementations
- Visual regression tests comparing old vs new component rendering
- Accessibility testing to ensure Radix UI patterns preserved
- Performance testing to ensure no rendering degradation

**Integration Verification Requirements:**
- IV1: Task card functionality identical in all contexts (LifeLock, Admin, etc.)
- IV2: Visual rendering matches existing design system
- IV3: User interactions produce identical results

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-16 | 1.0 | Initial story creation from PRD | Claude + User |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be populated during implementation*

### Debug Log References  
*To be populated during implementation*

### Completion Notes List
*To be populated during implementation*

### File List
*To be populated during implementation*

## QA Results
*Results from QA Agent review will be populated here after implementation*

---

*Story designed for safe component consolidation while maintaining perfect visual and functional consistency*